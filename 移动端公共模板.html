<!DOCTYPE html>
<html>
<head>
    <meta content="application/xhtml+xml;charset=UTF-8" http-equiv="Content-Type">
    <!--添加content="upgrade-insecure-requests"处理https加载http的资源：webpack开发时需要给devServer添加https:true-->
    <!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
    <meta content="no-cache" http-equiv="pragma">
    <meta content="0" http-equiv="expires">
    <meta content="telephone=no,email=no address=no" name="format-detection">
    <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>移动端公共模板</title>
    <link rel="stylesheet" href="./css/common.css"/>
    <style>
        /*mask部分 Start*/
        .mask {
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /*background-color: rgb(0, 0, 0);*/
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            padding-top: 1.6rem;
            padding-bottom: 2.3rem;
            overflow: auto;
            display: none;
        }
        /*mask部分 End*/
    </style>
    <!--<script>-->
        <!--var deviceWidth = document.documentElement.clientWidth;-->
        <!--if(deviceWidth > 640) deviceWidth = 640;-->
        <!--document.documentElement.style.fontSize = deviceWidth / 7.5 + 'px';-->
    <!--</script>-->
</head>
<body>
<script>
    //    设置rem单位
    var htmlDom = document.documentElement
    var clientWidth = htmlDom.clientWidth;
    if(clientWidth > 640) clientWidth = 640;
    htmlDom.style.fontSize = clientWidth / 3.75 + 'px';

    // 创建新元素，用来判断rem单位的计算是否出错
    var div = document.createElement('div')
    div.style.width = '1rem'
    div.style.height = '0'
    document.body.appendChild(div)
    var ideal = clientWidth / 3.75 // rem单位计算正确的数值（称为理想数值）
    var rmd = div.clientWidth / ideal // 计算真实的数值与理想rem数值的比例（如果为1，证明是rem单位正确计算了）
    console.log('真实的数值与理想rem数值的比例：',rmd)
    // 如果两者比例有0.2以上的出入，那就重置rem单位
    // 囧，发现有些三星手机中，rmd比例稍微大于0.8，看来要修改差距了，换为1.2与0.85
    // 囧，发现有谷歌手机中，rmd比例稍微小于1.14，看来要修改差距了，换为1.1与0.85
    if(rmd > 1.1 || rmd < 0.85){
        console.log('准备重置rem');
        document.documentElement.style.fontSize = (clientWidth / 3.75) / rmd + 'px';
        console.log('新的rem：',document.documentElement.style.fontSize);
    }
    document.body.removeChild(div);

</script>

<div id="app">

</div>


<!--mask部分 Start-->
<div class="mask" id="mask">

</div>
<!--mask部分 End-->

</body>
</html>
